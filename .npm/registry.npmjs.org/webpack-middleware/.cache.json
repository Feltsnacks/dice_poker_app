{"_id":"webpack-middleware","_rev":"4-6e4183832df58071592f788ea636b23a","name":"webpack-middleware","description":"Run Webpack compiler as Express.js/Browsersync middleware","dist-tags":{"latest":"1.5.1"},"versions":{"1.4.0":{"name":"webpack-middleware","version":"1.4.0","author":{"name":"Tobias Koppers @sokra"},"contributors":[{"name":"Konstantin Tarkus","email":"hello@tarkus.me"}],"description":"Run Webpack compiler as Express.js/Browsersync middleware","peerDependencies":{"webpack":">=1.0.0 <3"},"dependencies":{"memory-fs":"~0.3.0","mime":"^1.3.4"},"licenses":[{"type":"MIT","url":"http://www.opensource.org/licenses/mit-license.php"}],"engines":{"node":">=0.6"},"homepage":"http://github.com/kriasoft/webpack-middleware","main":"middleware.js","repository":{"type":"git","url":"git+https://github.com/kriasoft/webpack-middleware.git"},"gitHead":"edf3327128d7148e9352aa8127b5e39126537a58","bugs":{"url":"https://github.com/kriasoft/webpack-middleware/issues"},"_id":"webpack-middleware@1.4.0","scripts":{},"_shasum":"8e81da6d87665e790ae64d71fe9adca2c7bec4d5","_from":".","_npmVersion":"3.4.1","_nodeVersion":"5.1.0","_npmUser":{"name":"koistya","email":"hello@tarkus.me"},"maintainers":[{"name":"koistya","email":"hello@tarkus.me"}],"dist":{"shasum":"8e81da6d87665e790ae64d71fe9adca2c7bec4d5","tarball":"https://registry.npmjs.org/webpack-middleware/-/webpack-middleware-1.4.0.tgz"},"directories":{}},"1.5.1-beta1":{"name":"webpack-middleware","version":"1.5.1-beta1","author":{"name":"Tobias Koppers @sokra"},"contributors":[{"name":"Konstantin Tarkus","email":"hello@tarkus.me"}],"description":"Run Webpack compiler as Express.js/Browsersync middleware","peerDependencies":{"webpack":">=1.0.0 <3"},"dependencies":{"memory-fs":"~0.3.0","mime":"^1.3.4"},"licenses":[{"type":"MIT","url":"http://www.opensource.org/licenses/mit-license.php"}],"engines":{"node":">=0.6"},"homepage":"http://github.com/kriasoft/webpack-middleware","main":"middleware.js","repository":{"type":"git","url":"git+https://github.com/kriasoft/webpack-middleware.git"},"gitHead":"a544385265d7b24f9045f5d73a7611a4ad3b7f83","bugs":{"url":"https://github.com/kriasoft/webpack-middleware/issues"},"_id":"webpack-middleware@1.5.1-beta1","scripts":{},"_shasum":"ad547b08bb53ef7de13c28108d20ce4cd429f75f","_from":".","_npmVersion":"3.7.5","_nodeVersion":"5.7.0","_npmUser":{"name":"koistya","email":"hello@tarkus.me"},"maintainers":[{"name":"koistya","email":"hello@tarkus.me"}],"dist":{"shasum":"ad547b08bb53ef7de13c28108d20ce4cd429f75f","tarball":"https://registry.npmjs.org/webpack-middleware/-/webpack-middleware-1.5.1-beta1.tgz"},"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/webpack-middleware-1.5.1-beta1.tgz_1456948338642_0.9432192652020603"},"directories":{}},"1.5.1":{"name":"webpack-middleware","version":"1.5.1","author":{"name":"Tobias Koppers @sokra"},"contributors":[{"name":"Konstantin Tarkus","email":"hello@tarkus.me"}],"description":"Run Webpack compiler as Express.js/Browsersync middleware","peerDependencies":{"webpack":">=1.0.0 <3"},"dependencies":{"memory-fs":"~0.3.0","mime":"^1.3.4"},"licenses":[{"type":"MIT","url":"http://www.opensource.org/licenses/mit-license.php"}],"engines":{"node":">=0.6"},"homepage":"http://github.com/kriasoft/webpack-middleware","main":"middleware.js","repository":{"type":"git","url":"git+https://github.com/kriasoft/webpack-middleware.git"},"gitHead":"a544385265d7b24f9045f5d73a7611a4ad3b7f83","bugs":{"url":"https://github.com/kriasoft/webpack-middleware/issues"},"_id":"webpack-middleware@1.5.1","scripts":{},"_shasum":"46511efe3bef92da68913b8977c2caafab5226f3","_from":".","_npmVersion":"3.7.5","_nodeVersion":"5.7.0","_npmUser":{"name":"koistya","email":"hello@tarkus.me"},"maintainers":[{"name":"koistya","email":"hello@tarkus.me"}],"dist":{"shasum":"46511efe3bef92da68913b8977c2caafab5226f3","tarball":"https://registry.npmjs.org/webpack-middleware/-/webpack-middleware-1.5.1.tgz"},"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/webpack-middleware-1.5.1.tgz_1456949921435_0.311501992167905"},"directories":{}}},"readme":"# webpack-middleware\r\n\r\n> Run Webpack compiler as Express.js/Browsersync middleware\r\n\r\n**Note**: *This is a fork from [webpack-dev-middleware](https://github.com/webpack/webpack-dev-middleware)\r\nwith the only difference that it supports configurations with mixed\r\nweb/node.js bundles (great for isomorphic apps).*\r\n\r\n## What is it?\r\n\r\nIt's a simple wrapper middleware for webpack. It serves the files emitted from webpack over a connect server.\r\n\r\nIt has a few advantages over bundling it as files:\r\n\r\n* No files are written to disk, it handle the files in memory\r\n* If files changed in watch mode, the middleware no longer serves the old bundle, but delays requests until the compiling has finished. You don't have to wait before refreshing the page after a file modification.\r\n* I may add some specific optimization in future releases.\r\n\r\n## Getting Started\r\n\r\n``` javascript\r\nimport webpack from 'webpack';\r\nimport webpackMiddleware from 'webpack-middleware';\r\nimport webpackConfig from './webpack.config.js'; // <- array of Webpack configs\r\nimport runNode from './runNode.js';\r\n\r\n// Launch Webpack compiler in watch mode\r\nconst wp = webpackMiddleware(webpack(webpackConfig));\r\n\r\n// Launch Node.js app in a child process\r\nrunNode('./build/server.js').then(() => {\r\n  // Launch Browsersync dev server in proxy mode\r\n  const bs = require('browser-sync').create();\r\n  bs.init({\r\n    proxy: {\r\n      target: 'localhost:3000', // <- where Node.js app is running\r\n      middleware: [wp]\r\n    }\r\n  });\r\n}, (err) => console.error(err));\r\n```\r\n\r\n### Configuration Options\r\n\r\n``` javascript\r\napp.use(webpackMiddleware(webpack({\r\n\t// webpack options\r\n\t// webpackMiddleware takes a Compiler object as first parameter\r\n\t// which is returned by webpack(...) without callback.\r\n\tentry: '...',\r\n\toutput: {\r\n\t\tpath: '/'\r\n\t\t// no real path is required, just pass '/'\r\n\t\t// but it will work with other paths too.\r\n\t}\r\n}), {\r\n\t// all options optional\r\n\r\n\tnoInfo: false,\r\n\t// display no info to console (only warnings and errors)\r\n\r\n\tquiet: false,\r\n\t// display nothing to the console\r\n\r\n\tlazy: true,\r\n\t// switch into lazy mode\r\n\t// that means no watching, but recompilation on every request\r\n\r\n\twatchOptions: {\r\n\t\taggregateTimeout: 300,\r\n\t\tpoll: true\r\n\t},\r\n\t// watch options (only lazy: false)\r\n\r\n\tpublicPath: '/assets/',\r\n\t// public path to bind the middleware to\r\n\t// use the same as in webpack\r\n\r\n\theaders: { 'X-Custom-Header': 'yes' },\r\n\t// custom headers\r\n\r\n\tstats: {\r\n\t\tcolors: true\r\n\t}\r\n\t// options for formatting the statistics\r\n}));\r\n```\r\n\r\n## Advanced API\r\n\r\nThis part shows how you might interact with the middleware during runtime:\r\n\r\n* `close(callback)` - stop watching for file changes\r\n\t```js\r\n\tvar webpackDevMiddlewareInstance = webpackMiddleware(/* see example usage */);\r\n\tapp.use(webpackDevMiddlewareInstance);\r\n\t// After 10 seconds stop watching for file changes:\r\n\tsetTimeout(function(){\r\n\t  webpackDevMiddlewareInstance.close();\r\n\t}, 10000);\r\n\t```\r\n\r\n* `invalidate()` - recompile the bundle - e.g. after you changed the configuration\r\n\t```js\r\n\tvar compiler = webpack(/* see example usage */);\r\n\tvar webpackDevMiddlewareInstance = webpackMiddleware(compiler);\r\n\tapp.use(webpackDevMiddlewareInstance);\r\n\tsetTimeout(function(){\r\n\t  // After a short delay the configuration is changed\r\n\t  // in this example we will just add a banner plugin:\r\n\t  compiler.apply(new webpack.BannerPlugin('A new banner'));\r\n\t  // Recompile the bundle with the banner plugin:\r\n\t  webpackDevMiddlewareInstance.invalidate();\r\n\t}, 1000);\r\n\t```\r\n\r\n* `waitUntilValid(callback)` - executes the `callback` if the bundle is valid or after it is valid again:\r\n\t```js\r\n\tvar webpackDevMiddlewareInstance = webpackMiddleware(/* see example usage */);\r\n\tapp.use(webpackDevMiddlewareInstance);\r\n\twebpackDevMiddleware.waitUntilValid(function(){\r\n\t  console.log('Package is in a valid state');\r\n\t});\r\n\t```\r\n\r\n## Related Projects\r\n\r\n * [Webpack](http://webpack.github.io/) — JavaScript module bundler\r\n * [React Starter Kit](https://github.com/kriasoft/react-starter-kit) — Isomorphic web application boilerplate\r\n * [isomorphic-style-loader](https://github.com/kriasoft/isomorphic-style-loader) — Isomorphic CSS styles loader for Webpack\r\n ","maintainers":[{"name":"koistya","email":"hello@tarkus.me"}],"time":{"modified":"2016-03-02T20:18:44.105Z","created":"2015-12-06T00:24:02.085Z","1.4.0":"2015-12-06T00:24:02.085Z","1.5.1-beta1":"2016-03-02T19:52:21.571Z","1.5.1":"2016-03-02T20:18:44.105Z"},"homepage":"http://github.com/kriasoft/webpack-middleware","repository":{"type":"git","url":"git+https://github.com/kriasoft/webpack-middleware.git"},"contributors":[{"name":"Konstantin Tarkus","email":"hello@tarkus.me"}],"author":{"name":"Tobias Koppers @sokra"},"bugs":{"url":"https://github.com/kriasoft/webpack-middleware/issues"},"readmeFilename":"README.md","users":{"nelix":true},"_attachments":{},"_etag":"\"91KHKAH9Q7FWQU8OQV4C7BUB8\""}